<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace = "kr.or.kosta.semicolon.orderlist.dao.OrderListDao">
  	<insert id="insert" parameterType="OrderList">
  		<selectKey keyProperty="orderListNo" order="BEFORE" resultType="int">
  			SELECT SEQ_ORDER_LIST.nextval as orderListNo FROM DUAL
  		</selectKey>
  		INSERT INTO order_list
  				(order_list_no,
  				qty,
  				tops_no,
  				bottom_no,
  				gpurchase_no,
  				orders_no)
  		VALUES (#{orderListNo},
  				#{qty},
  				#{topsNo, jdbcType=NUMERIC},
  				#{bottomNo, jdbcType=NUMERIC},
  				#{gpurchaseNo},
  				#{ordersNo})
  	</insert>
  
  	<select id="select" parameterType="int" resultType="OrderList">
  		SELECT order_list_no,
  				qty,
  				tops_no,
  				bottom_no,
  				gpurchase_no,
  				orders_no
  		FROM order_list
  		WHERE order_list_no = #{value}
  	</select>
  	
  	<select id="listAll" resultType="OrderList">
  		SELECT order_list_no,
  				qty,
  				tops_no,
  				bottom_no,
  				gpurchase_no,
  				orders_no
  		FROM order_list
  	</select>
  	
  	<update id="update" parameterType="OrderList">
  		UPDATE order_list
  		<set>
  			<if test="qty!=null">qty = #{qty},</if>
  			<if test="topsNo!=null">tops_no = #{topsNo},</if>
  			<if test="bottomNo!=null">bottom_no = #{bottomNo}</if>
  		</set>
  		WHERE order_list_no = #{orderListNo}
  	</update>
  	
  	<delete id="delete" parameterType="int">
  		DELETE FROM order_list
  		WHERE order_list_no = #{value}
  	</delete>
  
  </mapper>